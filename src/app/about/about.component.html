<section id="education" class="education">
  <h2 style="margin-bottom: 10px">Education</h2>
  <div class="timeline">
    <div *ngFor="let edu of educations" class="timeline-item">
      <div class="timeline-content">
        <h3>{{ edu.degree }}</h3>
        <p>
          <strong>{{ edu.institution }}</strong>
        </p>
        <p>{{ edu.duration }}</p>
        <p class="percentage">Score: {{ edu.percentage }}</p>
      </div>
    </div>
  </div>
</section>

<section id="skills" class="skills">
  <h2 style="margin-bottom: 10px">Skills</h2>
  <div class="skills-grid">
    <div
      *ngFor="let skill of skills"
      class="skill-item"
      (click)="openSkillPopup(skill)"
    >
      <div class="skill-icon">
        <i [class]="skill.icon" *ngIf="skill.icon"></i>
      </div>
      <div class="skill-info">
        <h3>{{ skill.name }}</h3>
        <div class="skill-progress">
          <div class="progress-bar" [style.width]="skill.progress + '%'"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Skill Popup -->
<div class="skill-popup" *ngIf="selectedSkill">
  <div class="popup-content">
    <button class="close-btn" (click)="closeSkillPopup()">&times;</button>
    <h3>{{ selectedSkill.name }}</h3>
    <p>{{ selectedSkill.details }}</p>
  </div>
</div>

<section id="achievements" class="achievements">
  <h2 style="margin-bottom: 10px">Achievements</h2>
  <div class="achievements-grid">
    <div *ngFor="let achievement of achievements" class="achievement-item">
      <h3>{{ achievement.name }}</h3>
      <p>{{ achievement.duration }}</p>
      <p class="achievement-rank">{{ achievement.details }}</p>
    </div>
  </div>
</section>

<section id="leetcode" class="leetcode-section">
  <div class="leetcode-header">
    <h2>LeetCode Stats</h2>
    <button
      class="refresh-btn"
      (click)="refreshLeetCodeData()"
      [disabled]="isLoadingLeetCode"
    >
      <span class="icon" [class.spin]="isLoadingLeetCode">&#8635;</span>
    </button>
  </div>

  <div
    class="leetcode-content"
    *ngIf="!isLoadingLeetCode && leetcodeData; else loading"
  >
    <div class="leetcode-cards">
      <div class="leetcode-card solved">
        <span class="card-title">Total Solved</span>
        <span class="card-value">{{ leetcodeData.totalSolved || 0 }}</span>
      </div>
      <div class="leetcode-card ranking">
        <span class="card-title">Global Ranking</span>
        <span class="card-value">{{ leetcodeData.ranking || "N/A" }}</span>
      </div>
    </div>
    <div class="leetcode-calendar-title">Submission Calendar</div>
    <div class="leetcode-calendar">
      <div class="calendar-grid">
        <div
          *ngFor="let day of leetcodeCalendar"
          class="calendar-day"
          [ngClass]="getActivityLevel(day.count)"
          [title]="day.date + ': ' + day.count + ' submissions'"
        ></div>
      </div>
      <div class="calendar-legend">
        <span>Less</span>
        <div class="legend-bar">
          <span class="calendar-day level-0"></span>
          <span class="calendar-day level-1"></span>
          <span class="calendar-day level-2"></span>
          <span class="calendar-day level-3"></span>
          <span class="calendar-day level-4"></span>
        </div>
        <span>More</span>
      </div>
    </div>
  </div>

  <ng-template #loading>
    <div class="leetcode-loading">
      <span class="icon spin">&#8635;</span>
      <span>Loading LeetCode data...</span>
    </div>
  </ng-template>
  <div class="leetcode-error" *ngIf="leetcodeError">
    <span class="icon">&#9888;</span>
    <span>{{ leetcodeError }}</span>
    <button class="retry-btn" (click)="refreshLeetCodeData()">Retry</button>
  </div>
</section>
