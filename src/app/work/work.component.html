<section id="experiences" class="experiences">
  <h2 style="margin-bottom: 10px">Experiences</h2>
  <div class="experiences-grid">
    <div *ngFor="let experience of experiences" class="experience-card">
      <div class="experience-header">
        <h3 class="company-name">{{ experience.company }}</h3>
        <div
          class="certificate-badge"
          *ngIf="experience.hasCertificate"
          (click)="viewCertificate($event, experience)"
          title="View Experience Letter"
        >
          <i class="certificate-icon">📄</i>
          <span class="badge-text">View Letter</span>
        </div>
      </div>
      <h4 class="experience-title">{{ experience.title }}</h4>
      <p class="experience-duration">{{ experience.duration }}</p>
      <p class="experience-description">{{ experience.description }}</p>
      <ul class="experience-skills">
        <li *ngFor="let skill of experience.skills" class="skill">
          {{ skill }}
        </li>
      </ul>
      <p *ngIf="experience.achievement" class="experience-achievement">
        🏆 {{ experience.achievement }}
      </p>
    </div>
  </div>
</section>

<section id="projects" class="projects">
  <h2 style="margin-bottom: 10px">Projects</h2>
  <div class="projects-grid">
    <div
      *ngFor="let project of projects"
      class="project-card"
      (click)="handleProjectClick(project)"
    >
      <div class="project-header">
        <h3 class="project-title">{{ project.title }}</h3>
        <div
          class="certificate-badge"
          *ngIf="project.hasCertificate"
          (click)="viewCertificate($event, project)"
          title="View Project Certificate"
        >
          <i class="certificate-icon">🏆</i>
          <span class="badge-text">Certificate</span>
        </div>
      </div>
      <p class="project-duration">{{ project.duration }}</p>
      <p class="project-description">{{ project.description }}</p>
      <ul class="project-skills">
        <li *ngFor="let skill of project.skills" class="skill">{{ skill }}</li>
      </ul>
      <p *ngIf="project.achievement" class="project-achievement">
        🏆 {{ project.achievement }}
      </p>
    </div>
  </div>
</section>

<!-- Popup for Empty Link -->
<div class="popup" *ngIf="showPopup">
  <div class="popup-content">
    <p>This project does not have a link available.</p>
    <button (click)="closePopup()">Close</button>
  </div>
</div>

<!-- Certificate/Experience Letter Popup -->
<div class="certificate-popup" *ngIf="showCertificatePopup">
  <div class="certificate-popup-content">
    <div class="certificate-header">
      <h3>{{ certificateTitle }}</h3>
      <h4>{{ certificateType }}</h4>
      <button class="close-btn" (click)="closeCertificatePopup()">×</button>
    </div>
    <div class="certificate-body">
      <!-- If it's an image or direct content URL -->
      <img
        *ngIf="
          certificateUrl &&
          (certificateUrl.toString().endsWith('.jpg') ||
            certificateUrl.toString().endsWith('.png') ||
            certificateUrl.toString().endsWith('.jpeg'))
        "
        [src]="certificateUrl"
        alt="Certificate or Letter"
      />

      <!-- If it's a PDF or other document type, use iframe -->
      <iframe
        *ngIf="
          certificateUrl &&
          !certificateUrl.toString().endsWith('.jpg') &&
          !certificateUrl.toString().endsWith('.png') &&
          !certificateUrl.toString().endsWith('.jpeg')
        "
        [src]="certificateUrl"
        frameborder="0"
        width="100%"
        height="500px"
      >
      </iframe>
    </div>
  </div>
</div>
